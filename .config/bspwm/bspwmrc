#!/bin/sh
# bspwmrc

# load theming
source $XDG_CONFIG_HOME/themes/config

# calculating padding based on theme config
padding_height="$(echo "$PANEL_GEOMETRY" |  grep -Eo '[0-9]{1,4}' | head -n2 | tail -1)"
padding_y="$(echo "$PANEL_GEOMETRY" |  grep -Eo '[0-9]{1,4}' | head -n4 | tail -1)"
top_padding=$(($padding_height + $padding_y))

# general
bspc config border_width			3
bspc config window_gap				11
bspc config split_ratio				1
bspc config borderless_monocle			false
bspc config gapless_monocle			false
bspc config focus_follows_pointer		true
bspc config auto_alternate			true
bspc config auto_cancel				true
bspc config normal_frame_opacity 		1
bspc config focused_frame_opacity 		1

# border colours
bspc config focused_border_color		$COLOR_0E
bspc config active_border_color			$COLOR_04
bspc config normal_border_color			$COLOR_04
bspc config urgent_border_color			$COLOR_08
bspc config presel_border_color			$COLOR_0A

# border colours locked
bspc config focused_locked_border_color		$COLOR_0A
bspc config active_locked_border_color		$COLOR_0A
bspc config normal_locked_border_color 		$COLOR_0A

# border colours sticky
bspc config focused_sticky_border_color		$COLOR_0C
bspc config active_sticky_border_color		$COLOR_0C
bspc config normal_sticky_border_color		$COLOR_0C

# border colours private
bspc config focused_private_border_color	$COLOR_0B
bspc config active_private_border_color		$COLOR_0B
bspc config normal_private_border_color		$COLOR_0B

# specific monitor settings
bspc config -m DVI-I-1 top_padding		$top_padding

# monitors / desktops
bspc monitor DVI-I-1 -d 1 2 3 4 5
bspc monitor HDMI-0 -d tv

# rules
bspc rule -a "Kodi"		 		desktop=6 fullscreen=on
bspc rule -a "Deluge" 				desktop=4
bspc rule -a "Steam"				desktop=4
bspc rule -a "Wine" 				desktop=5
bspc rule -a "explorer.exe"			desktop=5		# force wine shit 
bspc rule -a "mpv" 				floating=on

# firefox specific rules
bspc rule -a "Navigator"			floating=off		# firefox itself
bspc rule -a "Places"				floating=on		# history
bspc rule -a "Toplevel"				floating=on		# settings for other shit
bspc rule -a "Browser"				floating=on		# settings
bspc rule -a "plugin-container"			floating=on 		# usually flash

# launching panel
$SCRIPTS/panel/panel_bg & # awful hack, will fix some day.
$SCRIPTS/panel/panel &
